<div class="flex justify-between items-center bg-[#2d6783] py-5 px-5">
  <img
    *ngIf="!secondFlag"
    class="w-[20px] h-[20px] cursor-pointer"
    src="assets/icons/info.png"
    alt=""
  />
  <img
    *ngIf="secondFlag"
    class="w-[20px] h-[20px] cursor-pointer"
    src="assets/icons/back.png"
    alt=""
    (click)="onBackClick()"
  />
  <div *ngIf="!secondFlag" class="text-[#ffffff] font-[300]">New Request</div>
  <div *ngIf="secondFlag" class="text-[#ffffff] font-[300]">
    Request Follow Up
  </div>
  <img
    class="w-[16px] h-[16px] cursor-pointer"
    src="assets/icons/more.png"
    alt=""
  />
</div>
<div class="flex flex-col items-center relative">
  <div id="map" style="width: 100%; height: 500px"></div>
  <div class="absolute top-0 bg-white w-full" *ngIf="secondFlag">
    <div class="flex justify-between px-6 py-10">
      <div
        *ngFor="let status of statuses"
        [ngClass]="{
          'text-[#afafaf]': !checkState(status.index),
          'text-[#58a97a]': checkState(status.index),
          'flex flex-col items-center': true
        }"
      >
        <div
          [ngClass]="{
            'border-[#afafaf]': !checkState(status.index),
            'border-[#58a97a]': checkState(status.index),
            'flex justify-center items-center border w-[35px] h-[35px] rounded-full mb-1': true
          }"
        >
          {{ status.index }}
        </div>
        <div>{{ status.state }}</div>
      </div>
    </div>
    <hr />
    <div class="flex items-center gap-5 px-6 py-6">
      <img
        class="w-[100px] h-[100px] rounded-full"
        src="assets/icons/profile.png"
        alt=""
      />
      <div class="flex flex-col w-full">
        <div class="text-lg font-bold">{{ selectedService.provider }}</div>
        <div class="flex mt-1 mb-3">
          <img class="w-[17px] h-[17px]" src="assets/icons/star.png" alt="" />
          <img class="w-[17px] h-[17px]" src="assets/icons/star.png" alt="" />
          <img class="w-[17px] h-[17px]" src="assets/icons/star.png" alt="" />
          <img class="w-[17px] h-[17px]" src="assets/icons/star.png" alt="" />
          <img class="w-[17px] h-[17px]" src="assets/icons/star.png" alt="" />
        </div>
        <div class="flex gap-3">
          <button class="bg-red-700 h-[40px] w-1/2 rounded text-white">
            Cancel</button
          ><button class="bg-green-700 h-[40px] w-1/2 rounded text-white">
            Call
          </button>
        </div>
      </div>
    </div>
  </div>
  <button
    [disabled]="this.markerLoc.lat === null"
    (click)="onServicesClick()"
    class="absolute bottom-[2%] disabled:opacity-90 opacity-100 font-[300] bg-[#2d6783] text-white py-2 px-4 rounded h-[50px] w-[90%]"
  >
    Select Service
  </button>
</div>

<p-table [value]="services" responsiveLayout="scroll" *ngIf="firstFlag">
  <ng-template pTemplate="header">
    <tr>
      <th>Type</th>
      <th>Provider</th>
      <th>Action</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-service>
    <tr>
      <td>{{ service.type }}</td>
      <td>{{ service.provider }}</td>
      <td>
        <img
          class="w-[25px] h-[25px]"
          src="assets/icons/view.png"
          alt=""
          (click)="onActionClick(service)"
        />
      </td>
    </tr>
  </ng-template>
</p-table>
